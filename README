This is code taken from http://www.emacswiki.org/emacs/SmartTabs,
ruthlessly stolen and wrapped up in a file you can require.  All
credit to the original author.
